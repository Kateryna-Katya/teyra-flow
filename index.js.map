{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["// --- 1. Global Initialization ---\nlucide.createIcons();\n\n// --- 2. Lenis Smooth Scroll ---\nconst lenis = new Lenis({\n    duration: 1.2,\n    easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n    direction: 'vertical',\n    gestureDirection: 'vertical',\n    smooth: true,\n    mouseMultiplier: 1,\n    smoothTouch: false,\n    touchMultiplier: 2,\n});\n\nfunction raf(time) {\n    lenis.raf(time);\n    requestAnimationFrame(raf);\n}\nrequestAnimationFrame(raf);\n\n// --- 3. Header Scroll Effect & Mobile Menu ---\nconst header = document.querySelector('.header');\nconst burgerBtn = document.querySelector('.burger-btn');\nconst mobileMenu = document.querySelector('.mobile-menu');\nconst mobileLinks = document.querySelectorAll('.mobile-menu__link, .mobile-menu__btn');\nconst body = document.body;\n\nwindow.addEventListener('scroll', () => {\n    if (window.scrollY > 50) {\n        header.classList.add('scrolled');\n    } else {\n        header.classList.remove('scrolled');\n    }\n});\n\nfunction toggleMenu() {\n    const isOpen = mobileMenu.classList.contains('is-active');\n    \n    if (isOpen) {\n        mobileMenu.classList.remove('is-active');\n        body.style.overflow = ''; // Return scroll\n        burgerBtn.innerHTML = '<i data-lucide=\"menu\"></i>';\n    } else {\n        mobileMenu.classList.add('is-active');\n        body.style.overflow = 'hidden'; // Lock scroll\n        burgerBtn.innerHTML = '<i data-lucide=\"x\"></i>';\n    }\n    lucide.createIcons();\n}\n\nburgerBtn.addEventListener('click', toggleMenu);\n\nmobileLinks.forEach(link => {\n    link.addEventListener('click', () => {\n        if (mobileMenu.classList.contains('is-active')) {\n            toggleMenu();\n        }\n    });\n});\n\n// --- 4. GSAP & ScrollTrigger Animations ---\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n    gsap.registerPlugin(ScrollTrigger);\n\n    // Hero Animations (Reworked to fix gradient text)\n    const baseTextElement = document.querySelector('.hero__title-base');\n    if (baseTextElement) {\n        new SplitType(baseTextElement, { types: 'lines, words' });\n    }\n    \n    const tl = gsap.timeline();\n\n    tl.fromTo('.hero__title-base .word', \n        { y: 50, opacity: 0 },\n        { y: 0, opacity: 1, stagger: 0.05, duration: 1, ease: \"power3.out\" }\n    )\n    .fromTo('.hero__title-accent',\n        { opacity: 0, scaleX: 0.8, y: 10 },\n        { opacity: 1, scaleX: 1, y: 0, duration: 0.6, ease: \"back.out(1.7)\" },\n        \"-=0.5\" \n    )\n    .fromTo('.hero__desc .reveal-text', \n        { y: 20, opacity: 0 },\n        { y: 0, opacity: 1, duration: 0.8, ease: \"power2.out\" }, \n        \"-=0.5\"\n    )\n    .fromTo('.reveal-up', \n        { y: 30, opacity: 0 },\n        { y: 0, opacity: 1, duration: 0.8, ease: \"power2.out\", stagger: 0.2 }, \n        \"-=0.5\"\n    )\n    .fromTo('.hero__visual', \n        { opacity: 0, scale: 0.9 },\n        { opacity: 1, scale: 1, duration: 1.2, ease: \"back.out(1.7)\" }, \n        \"-=1\"\n    );\n    \n    gsap.set('.reveal-text, .reveal-up', { opacity: 1 });\n\n\n    // General Scroll Animation (Trigger for all sections)\n    document.querySelectorAll('.reveal-trigger').forEach(el => {\n        gsap.fromTo(el,\n            { opacity: 0, y: 50 },\n            { \n                opacity: 1, \n                y: 0, \n                duration: 0.8, \n                ease: \"power2.out\",\n                scrollTrigger: {\n                    trigger: el,\n                    start: \"top 90%\", // Start animation when element is 90% in viewport\n                    toggleActions: \"play none none none\",\n                }\n            }\n        );\n    });\n\n});\n\n\n// --- 5. Contact Form Logic (Validation & AJAX imitation) ---\nconst form = document.getElementById('contactForm');\nconst phoneInput = document.getElementById('phone');\nconst captchaQuestion = document.getElementById('captchaQuestion');\nconst captchaInput = document.getElementById('captcha');\nconst captchaStatus = document.getElementById('captchaStatus');\nconst formMessage = document.getElementById('formMessage');\n\nlet captchaAnswer = 0;\n\nfunction generateCaptcha() {\n    const num1 = Math.floor(Math.random() * 5) + 3; // 3-7\n    const num2 = Math.floor(Math.random() * 3) + 1; // 1-3\n    captchaAnswer = num1 + num2;\n    captchaQuestion.textContent = `${num1} + ${num2}`;\n    captchaInput.value = '';\n    captchaInput.classList.remove('success', 'error');\n    captchaStatus.textContent = '';\n}\n\ngenerateCaptcha();\n\n// Captcha Real-time Validation\ncaptchaInput.addEventListener('input', () => {\n    const inputVal = parseInt(captchaInput.value);\n    const parent = captchaInput.closest('.form-group');\n\n    if (inputVal === captchaAnswer) {\n        parent.classList.remove('error');\n        parent.classList.add('success');\n        captchaStatus.textContent = '✅';\n        captchaStatus.style.color = 'var(--color-success)';\n    } else {\n        parent.classList.remove('success');\n        if (captchaInput.value.length > 0) {\n            parent.classList.add('error');\n            captchaStatus.textContent = '❌';\n            captchaStatus.style.color = 'var(--color-error)';\n        } else {\n            parent.classList.remove('error');\n            captchaStatus.textContent = '';\n        }\n    }\n});\n\n// Phone Input Sanitation (Only digits allowed)\nphoneInput.addEventListener('input', (e) => {\n    e.target.value = e.target.value.replace(/[^0-9]/g, '');\n});\n\n// AJAX Imitation on Submit\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n    formMessage.style.display = 'none'; // Hide previous message\n    \n    // Final Captcha Check\n    if (parseInt(captchaInput.value) !== captchaAnswer) {\n        formMessage.textContent = 'Ошибка: неверный ответ на капчу.';\n        formMessage.classList.remove('success');\n        formMessage.classList.add('error');\n        formMessage.style.display = 'block';\n        return;\n    }\n\n    // Simulate AJAX Request (2 seconds delay)\n    const submitBtn = document.getElementById('submitBtn');\n    submitBtn.textContent = 'Отправка...';\n    submitBtn.disabled = true;\n\n    setTimeout(() => {\n        // Success response imitation\n        formMessage.textContent = 'Спасибо! Ваша заявка принята. Мы свяжемся с вами в ближайшее время.';\n        formMessage.classList.remove('error');\n        formMessage.classList.add('success');\n        formMessage.style.display = 'block';\n        \n        form.reset();\n        generateCaptcha(); // Reset captcha after successful submission\n        submitBtn.textContent = 'Запросить консультацию';\n        submitBtn.disabled = false;\n\n    }, 2000);\n});\n\n// --- 6. Cookie Popup Logic ---\nconst cookiePopup = document.getElementById('cookiePopup');\nconst acceptCookiesBtn = document.getElementById('acceptCookies');\nconst cookieName = 'teyraFlow_cookiesAccepted';\n\nfunction checkCookieConsent() {\n    if (localStorage.getItem(cookieName) !== 'true') {\n        cookiePopup.classList.add('visible');\n    }\n}\n\nfunction setCookieConsent() {\n    localStorage.setItem(cookieName, 'true');\n    cookiePopup.classList.remove('visible');\n}\n\nacceptCookiesBtn.addEventListener('click', setCookieConsent);\n\n// Check consent on page load\nwindow.addEventListener('load', checkCookieConsent);"],"names":["lenis","t","raf","time","header","burgerBtn","mobileMenu","mobileLinks","body","toggleMenu","link","baseTextElement","el","form","phoneInput","captchaQuestion","captchaInput","captchaStatus","formMessage","captchaAnswer","generateCaptcha","num1","num2","inputVal","parent","submitBtn","cookiePopup","acceptCookiesBtn","cookieName","checkCookieConsent","setCookieConsent"],"mappings":"0uBACA,OAAO,YAAa,EAGpB,MAAMA,EAAQ,IAAI,MAAM,CACpB,SAAU,IACV,OAASC,GAAM,KAAK,IAAI,EAAG,MAAQ,KAAK,IAAI,EAAG,IAAMA,CAAC,CAAC,EACvD,UAAW,WACX,iBAAkB,WAClB,OAAQ,GACR,gBAAiB,EACjB,YAAa,GACb,gBAAiB,CACrB,CAAC,EAED,SAASC,EAAIC,EAAM,CACfH,EAAM,IAAIG,CAAI,EACd,sBAAsBD,CAAG,CAC7B,CACA,sBAAsBA,CAAG,EAGzB,MAAME,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,iBAAiB,uCAAuC,EAC/EC,EAAO,SAAS,KAEtB,OAAO,iBAAiB,SAAU,IAAM,CAChC,OAAO,QAAU,GACjBJ,EAAO,UAAU,IAAI,UAAU,EAE/BA,EAAO,UAAU,OAAO,UAAU,CAE1C,CAAC,EAED,SAASK,GAAa,CACHH,EAAW,UAAU,SAAS,WAAW,GAGpDA,EAAW,UAAU,OAAO,WAAW,EACvCE,EAAK,MAAM,SAAW,GACtBH,EAAU,UAAY,+BAEtBC,EAAW,UAAU,IAAI,WAAW,EACpCE,EAAK,MAAM,SAAW,SACtBH,EAAU,UAAY,2BAE1B,OAAO,YAAa,CACxB,CAEAA,EAAU,iBAAiB,QAASI,CAAU,EAE9CF,EAAY,QAAQG,GAAQ,CACxBA,EAAK,iBAAiB,QAAS,IAAM,CAC7BJ,EAAW,UAAU,SAAS,WAAW,GACzCG,EAAY,CAExB,CAAK,CACL,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,IAAM,CAChD,KAAK,eAAe,aAAa,EAGjC,MAAME,EAAkB,SAAS,cAAc,mBAAmB,EAC9DA,GACA,IAAI,UAAUA,EAAiB,CAAE,MAAO,cAAc,CAAE,EAGjD,KAAK,SAAU,EAEvB,OAAO,0BACN,CAAE,EAAG,GAAI,QAAS,CAAG,EACrB,CAAE,EAAG,EAAG,QAAS,EAAG,QAAS,IAAM,SAAU,EAAG,KAAM,YAAY,CAC1E,EACK,OAAO,sBACJ,CAAE,QAAS,EAAG,OAAQ,GAAK,EAAG,EAAI,EAClC,CAAE,QAAS,EAAG,OAAQ,EAAG,EAAG,EAAG,SAAU,GAAK,KAAM,eAAiB,EACrE,OACR,EACK,OAAO,2BACJ,CAAE,EAAG,GAAI,QAAS,CAAG,EACrB,CAAE,EAAG,EAAG,QAAS,EAAG,SAAU,GAAK,KAAM,YAAc,EACvD,OACR,EACK,OAAO,aACJ,CAAE,EAAG,GAAI,QAAS,CAAG,EACrB,CAAE,EAAG,EAAG,QAAS,EAAG,SAAU,GAAK,KAAM,aAAc,QAAS,EAAK,EACrE,OACR,EACK,OAAO,gBACJ,CAAE,QAAS,EAAG,MAAO,EAAK,EAC1B,CAAE,QAAS,EAAG,MAAO,EAAG,SAAU,IAAK,KAAM,eAAiB,EAC9D,KACH,EAED,KAAK,IAAI,2BAA4B,CAAE,QAAS,CAAC,CAAE,EAInD,SAAS,iBAAiB,iBAAiB,EAAE,QAAQC,GAAM,CACvD,KAAK,OAAOA,EACR,CAAE,QAAS,EAAG,EAAG,EAAI,EACrB,CACI,QAAS,EACT,EAAG,EACH,SAAU,GACV,KAAM,aACN,cAAe,CACX,QAASA,EACT,MAAO,UACP,cAAe,qBACnC,CACA,CACS,CACT,CAAK,CAEL,CAAC,EAID,MAAMC,EAAO,SAAS,eAAe,aAAa,EAC5CC,EAAa,SAAS,eAAe,OAAO,EAC5CC,EAAkB,SAAS,eAAe,iBAAiB,EAC3DC,EAAe,SAAS,eAAe,SAAS,EAChDC,EAAgB,SAAS,eAAe,eAAe,EACvDC,EAAc,SAAS,eAAe,aAAa,EAEzD,IAAIC,EAAgB,EAEpB,SAASC,GAAkB,CACvB,MAAMC,EAAO,KAAK,MAAM,KAAK,SAAW,CAAC,EAAI,EACvCC,EAAO,KAAK,MAAM,KAAK,SAAW,CAAC,EAAI,EAC7CH,EAAgBE,EAAOC,EACvBP,EAAgB,YAAc,GAAGM,CAAI,MAAMC,CAAI,GAC/CN,EAAa,MAAQ,GACrBA,EAAa,UAAU,OAAO,UAAW,OAAO,EAChDC,EAAc,YAAc,EAChC,CAEAG,EAAiB,EAGjBJ,EAAa,iBAAiB,QAAS,IAAM,CACzC,MAAMO,EAAW,SAASP,EAAa,KAAK,EACtCQ,EAASR,EAAa,QAAQ,aAAa,EAE7CO,IAAaJ,GACbK,EAAO,UAAU,OAAO,OAAO,EAC/BA,EAAO,UAAU,IAAI,SAAS,EAC9BP,EAAc,YAAc,IAC5BA,EAAc,MAAM,MAAQ,yBAE5BO,EAAO,UAAU,OAAO,SAAS,EAC7BR,EAAa,MAAM,OAAS,GAC5BQ,EAAO,UAAU,IAAI,OAAO,EAC5BP,EAAc,YAAc,IAC5BA,EAAc,MAAM,MAAQ,uBAE5BO,EAAO,UAAU,OAAO,OAAO,EAC/BP,EAAc,YAAc,IAGxC,CAAC,EAGDH,EAAW,iBAAiB,QAAU,GAAM,CACxC,EAAE,OAAO,MAAQ,EAAE,OAAO,MAAM,QAAQ,UAAW,EAAE,CACzD,CAAC,EAGDD,EAAK,iBAAiB,SAAW,GAAM,CAKnC,GAJA,EAAE,eAAgB,EAClBK,EAAY,MAAM,QAAU,OAGxB,SAASF,EAAa,KAAK,IAAMG,EAAe,CAChDD,EAAY,YAAc,mCAC1BA,EAAY,UAAU,OAAO,SAAS,EACtCA,EAAY,UAAU,IAAI,OAAO,EACjCA,EAAY,MAAM,QAAU,QAC5B,MACR,CAGI,MAAMO,EAAY,SAAS,eAAe,WAAW,EACrDA,EAAU,YAAc,cACxBA,EAAU,SAAW,GAErB,WAAW,IAAM,CAEbP,EAAY,YAAc,sEAC1BA,EAAY,UAAU,OAAO,OAAO,EACpCA,EAAY,UAAU,IAAI,SAAS,EACnCA,EAAY,MAAM,QAAU,QAE5BL,EAAK,MAAO,EACZO,IACAK,EAAU,YAAc,yBACxBA,EAAU,SAAW,EAExB,EAAE,GAAI,CACX,CAAC,EAGD,MAAMC,EAAc,SAAS,eAAe,aAAa,EACnDC,EAAmB,SAAS,eAAe,eAAe,EAC1DC,EAAa,4BAEnB,SAASC,GAAqB,CACtB,aAAa,QAAQD,CAAU,IAAM,QACrCF,EAAY,UAAU,IAAI,SAAS,CAE3C,CAEA,SAASI,GAAmB,CACxB,aAAa,QAAQF,EAAY,MAAM,EACvCF,EAAY,UAAU,OAAO,SAAS,CAC1C,CAEAC,EAAiB,iBAAiB,QAASG,CAAgB,EAG3D,OAAO,iBAAiB,OAAQD,CAAkB"}